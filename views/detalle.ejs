<%- include("../template/cabecera.ejs", {tituloWeb: 'detalle de mascota'})  %>

    
    
    <div class="container">
        <h1>Detalle de mascota</h1>
        <% if (error) { %>
            <p>
                <%= mensaje %> 
            </p>
            <a href="/mascotas" class="btn btn-warning btn-block">Volver a Mascotas</a>
        
            <% } %>
    </div>
    <% if (!error) { %>
        <table class="table table-dark table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">nombre</th>
                <th scope="col">descripcion</th>
                <th scope="col">accion</th>
              </tr>
            </thead>
            <tbody>        
                <tr>
                    <th scope="row"><%= mascota.id %></th>   
                    <td><%= mascota.nombre %></td>
                    <td><%= mascota.descripcion %></td>
                    <td><button
                            class="btn btn-danger btn-sm"
                            id="btnEliminar"
                            data-id="<%= mascota.id %>">
                                Eliminar
                        </button>
                    </td>
                </tr>
            </tbody>
          </table>
    <% } %>


<%- include("../template/footer.ejs")  %>


<script>
    const btnEliminar = document.querySelector('#btnEliminar');

    btnEliminar.addEventListener('click', async ()=>{
        const id = btnEliminar.dataset.id;
        console.log("id",id)
        try {
            const data = await fetch(`/mascotas/${id}`,{
                method: 'delete'
            });
            const res = await data.json();
            if(res.estado){
                window.location.href='/mascotas'
            }
        } catch (error) {
            console.log(error);
        }
    });
</script>